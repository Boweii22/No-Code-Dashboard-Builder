/**
 * @license
 *-------------------------------------------------------------------------------------------
 * Copyright Â© 2024 Progress Software Corporation. All rights reserved.
 * Licensed under commercial license. See LICENSE.md in the package root for more information
 *-------------------------------------------------------------------------------------------
 */
"use client";"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const X=require("react"),i=require("prop-types"),l=require("@progress/kendo-react-common"),D=require("@progress/kendo-svg-icons"),J=require("./RatingItem.js"),c=require("./rating-reducer.js"),u=require("./utils/index.js"),G=require("../messages/index.js"),Q=require("@progress/kendo-react-intl");function U(a){const d=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(a){for(const e in a)if(e!=="default"){const f=Object.getOwnPropertyDescriptor(a,e);Object.defineProperty(d,e,f.get?f:{enumerable:!0,get:()=>a[e]})}}return d.default=a,Object.freeze(d)}const n=U(X),z=(a,d,e)=>{const[f,m]=n.useState(a);return[f,s=>{const A=c.ratingReducer(d.state||f,{...s,...d});e&&e(A,s.event),m(A)}]},F=l.createPropsContext(),E=n.forwardRef((a,d)=>{const e=l.usePropsContext(F,a),f=Q.useLocalization(),m=n.useRef(null),x=n.useRef(null),s=l.useDir(x,e.dir);n.useImperativeHandle(m,()=>({element:x.current,props:e})),n.useImperativeHandle(d,()=>m.current);const A=n.useCallback((t,o)=>{e.onChange&&m.current&&e.onChange.call(void 0,{value:t,target:m.current,syntheticEvent:o})},[e.onChange]),h=n.useMemo(()=>e.min!==void 0?e.min:p.min,[e.min]),N=n.useMemo(()=>e.max!==void 0?e.max:p.max,[e.max]),I=n.useMemo(()=>e.precision||p.precision,[e.precision]),r=n.useMemo(()=>e.step!==void 0?e.step:p.step,[e.step]),O=n.useMemo(()=>e.readonly||p.readonly,[e.readonly]),R=n.useMemo(()=>e.disabled||p.disabled,[e.disabled]),H=n.useMemo(()=>e.item||p.item,[e.item]),[P,v]=z(e.defaultValue!==void 0?e.defaultValue:p.defaultValue,{state:e.value,min:h,max:N,step:I==="half"?r/2:r},A),[V,_]=z(null,{state:e.value,min:h,max:N,step:I==="half"?r/2:r,precision:I}),g=n.useMemo(()=>e.value!==void 0?e.value:P,[e.value,P]),C=n.useMemo(()=>V,[V]),S=n.useMemo(()=>e.selection||p.selection,[e.selection]),T=n.useMemo(()=>r/(I==="half"?2:1),[r,I]),K=n.useCallback(t=>{if(!(!t.target||!t.target.element||O||R)){if(I==="half"){const o=t.target.element.getBoundingClientRect(),k=u.calcIsFirstHalf(s||"ltr",o,t.syntheticEvent.clientX)?u.toRound(t.target.value-r/2,T):t.target.value;v({type:c.RATING_ACTION.select,payload:k,event:t.syntheticEvent})}else v({type:c.RATING_ACTION.select,payload:t.target.value,event:t.syntheticEvent});if(e.onClick){const o={value:g,target:m.current,syntheticEvent:t.syntheticEvent};e.onClick.call(void 0,o)}}},[e.onClick,v,g]),q=n.useCallback(t=>{if(!(O||R)){switch(t.keyCode){case l.Keys.right:t.preventDefault(),v({type:s==="rtl"?c.RATING_ACTION.decrease:c.RATING_ACTION.increase,event:t});break;case l.Keys.left:t.preventDefault(),v({type:s==="rtl"?c.RATING_ACTION.increase:c.RATING_ACTION.decrease,event:t});break;case l.Keys.home:t.preventDefault(),v({type:s==="rtl"?c.RATING_ACTION.min:c.RATING_ACTION.max,event:t});break;case l.Keys.end:t.preventDefault(),v({type:s==="rtl"?c.RATING_ACTION.max:c.RATING_ACTION.min,event:t});break;case l.Keys.esc:t.preventDefault(),v({type:c.RATING_ACTION.deselect,event:t});break}e.onKeyDown&&e.onKeyDown.call(void 0,{value:g,target:m.current,syntheticEvent:t})}},[e.onKeyDown,v,g]),B=n.useCallback(t=>{if(e.onFocus){const o={target:m.current,syntheticEvent:t};e.onFocus.call(void 0,o)}},[e.onFocus]),$=n.useCallback(t=>{if(e.onBlur){const o={target:m.current,syntheticEvent:t};e.onBlur.call(void 0,o)}},[e.onBlur]),W=n.useCallback(t=>{if(!(!t.target||!t.target.element))if(I==="half"){const o=t.target.element.getBoundingClientRect(),k=u.calcIsFirstHalf(s||"ltr",o,t.syntheticEvent.clientX)?t.target.value-r/2:t.target.value;_({type:c.RATING_ACTION.select,payload:k,event:t.syntheticEvent})}else _({type:c.RATING_ACTION.select,payload:t.target.value,event:t.syntheticEvent})},[I,r,s]),L=n.useCallback(t=>{_({type:c.RATING_ACTION.reset,event:t.syntheticEvent})},[]),w=[],j=u.getRemainder(u.toRound(N-h,T),r);for(let t=h;t<=N;t=u.toRound(t+r,T)){const o=u.toRound(t+j,T),y=I==="half"?u.isHalf(o,C!==null?C:g!==null?g:0,r):!1,k=u.isSelected(o,g,r,S),M=u.isSelected(o,C!==null?C:g,r,S),b=u.isSelected(o,C,r,S);w.push(n.createElement(H,{key:o,value:o,dir:s,title:String(y?u.toRound(o-r/2,T):o),icon:e.icon,svgIcon:e.svgIcon,half:y,selected:k||M,hovered:b,onClick:K,onMouseMove:W,onMouseLeave:L},y&&n.createElement("span",{className:"k-rating-precision-complement"},!(e.icon||e.svgIconOutline)&&n.createElement(l.IconWrap,{name:"star-outline",icon:D.starOutlineIcon,style:{clipPath:`${s==="rtl"?"inset(0 50% 0 0)":"inset(0 0 0 50%)"}`},size:"xlarge"}),(e.icon||e.svgIconOutline)&&n.createElement(l.IconWrap,{name:l.toIconName(`${e.icon}-outline`),icon:e.svgIconOutline,size:"xlarge"})),y&&n.createElement("span",{className:"k-rating-precision-part"},!(e.icon||e.svgIcon)&&n.createElement(l.IconWrap,{name:"star",icon:D.starIcon,style:{clipPath:`${s==="rtl"?"inset(0 0 0 50%)":"inset(0 50% 0 0)"}`},size:"xlarge"}),(e.icon||e.svgIcon)&&n.createElement(l.IconWrap,{name:e.icon?l.toIconName(e.icon):void 0,icon:e.svgIcon,size:"xlarge"})),y&&n.createElement("span",{style:{width:"24px",height:"24px",display:"block"}}),!y&&!(e.icon||e.svgIcon)&&(b||M&&!b)&&n.createElement(l.IconWrap,{name:"star",icon:D.starIcon,size:"xlarge"})||!(e.icon||e.svgIcon)&&!b&&!M&&n.createElement(l.IconWrap,{name:"star-outline",icon:D.starOutlineIcon,size:"xlarge"})||(e.icon||e.svgIcon)&&(b||M&&!b)&&n.createElement(l.IconWrap,{name:e.icon,icon:e.svgIcon,size:"xlarge"})||(e.icon||e.svgIcon)&&!b&&n.createElement(l.IconWrap,{name:l.toIconName(`${e.icon}-outline`),icon:e.svgIconOutline,size:"xlarge"})))}return n.createElement("span",{id:e.id,style:e.style,ref:x,role:"slider",dir:s,tabIndex:l.getTabIndex(e.tabIndex,e.disabled,void 0),className:l.classNames("k-rating",{"k-rtl":s==="rtl","k-readonly":O,"k-disabled":R},e.className),onKeyDown:q,onFocus:B,onBlur:$,"aria-valuemin":h,"aria-valuemax":N,"aria-valuenow":g!==null?g:void 0,"aria-disabled":R?"true":void 0,"aria-label":f.toLanguageString(G.ratingAriaLabel,G.messages[G.ratingAriaLabel]),"aria-labelledby":e.ariaLabelledBy,"aria-describedby":e.ariaDescribedBy},n.createElement("input",{id:"rating",className:"k-hidden",readOnly:O,disabled:R}),n.createElement("span",{className:"k-rating-container"},w),e.label&&n.createElement("span",{className:"k-rating-label"},e.label))}),Y={id:i.string,dir:i.oneOf(["ltr","rtl"]),selection:i.oneOf(["continues","single"]),precision:i.oneOf(["item","half"]),value:(a,d,e)=>a.value&&a.min&&a.max&&a.step&&!(a.precision==="half"?u.isCorrectValue(a.min,a.max,a.step/2,a.value):u.isCorrectValue(a.min,a.max,a.step,a.value))&&a.precision==="half"?new Error(`Invalid prop + ${d} supplied to ${e}.
                    The value of the { value } property is not correct, please check your values.
                    `):null,defaultValue:i.number,min:i.number,max:i.number,step:(a,d,e)=>a.step!==void 0&&a.step<=0?new Error(`Invalid prop + ${d} supplied to ${e}.
                The value of the { step } property is cannot be equal or less than "0", please check your values.
                `):null,hovered:i.number,label:i.string,readonly:i.bool,disabled:i.bool,half:i.bool,icon:i.string,svgIcon:l.svgIconPropType,svgIconOutline:l.svgIconPropType,ariaDescribedBy:i.string},p={dir:"ltr",min:1,max:5,step:1,item:J.RatingItem,defaultValue:null,readonly:!1,disabled:!1,selection:"continues",precision:"item"};E.displayName="KendoReactRating";E.propTypes=Y;E.defaultProps=p;exports.Rating=E;exports.RatingPropsContext=F;
