/**
 * @license
 *-------------------------------------------------------------------------------------------
 * Copyright Â© 2024 Progress Software Corporation. All rights reserved.
 * Licensed under commercial license. See LICENSE.md in the package root for more information
 *-------------------------------------------------------------------------------------------
 */
"use client";"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const X=require("react"),I=require("prop-types"),i=require("@progress/kendo-react-common"),R=require("../messages/index.js"),W=require("@progress/kendo-react-intl"),l=require("./range-raducer.js"),Y=require("../package-metadata.js");function F(r){const n=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(r){for(const e in r)if(e!=="default"){const s=Object.getOwnPropertyDescriptor(r,e);Object.defineProperty(n,e,s.get?s:{enumerable:!0,get:()=>r[e]})}}return n.default=r,Object.freeze(n)}const a=F(X),J=(r,n,e)=>{const[s,c]=a.useState(r),u=a.useCallback(m=>{const A=l.rangeReducer(n.state||s,{...m,...n});e&&e(A,m.event),c(A)},[n,e]);return[s,u]},_=i.createPropsContext(),x=a.forwardRef((r,n)=>{i.validatePackage(Y.packageMetadata);const e=i.usePropsContext(_,r),s=a.useRef(null),c=a.useRef(null),u=a.useRef(null),m=a.useRef(null),A=a.useRef(null),G=a.useCallback(()=>{m.current&&m.current.focus()},[m]);a.useImperativeHandle(s,()=>({element:c.current,focus:G,props:e})),a.useImperativeHandle(n,()=>s.current);const p=a.useMemo(()=>e.min,[e.min]),g=a.useMemo(()=>e.max,[e.max]),$=a.useMemo(()=>e.step!==void 0?e.step:T.step,[e.step,T.step]),y=i.useDir(c,e.dir),S=(t,f)=>{e.onChange&&s.current&&e.onChange.call(void 0,{value:t,target:s.current,syntheticEvent:f})},[D,O]=a.useState(""),[k,o]=J(e.defaultValue||T.defaultValue,{min:p,max:g,step:$,state:e.value},S),d=a.useMemo(()=>e.value||k,[e.value,k]),K=a.useRef(null),N=a.useRef(null),b=a.useMemo(()=>(d.start-p)/(g-p)*100,[d.start,p,g]),h=a.useMemo(()=>(d.end-p)/(g-p)*100,[d.end,p,g]),M=a.useMemo(()=>e.vertical?{paddingTop:0,height:"100%"}:{},[e.vertical]),P=a.useMemo(()=>e.vertical?{marginTop:"0.5rem",marginBottom:"0.5rem"}:{marginLeft:"0.5rem",marginRight:"0.5rem"},[e.vertical]),w=W.useLocalization(),C=a.useCallback(t=>{if(!N.current)return;const f=N.current.getBoundingClientRect(),v=e.vertical?f.bottom-t.clientY:y==="rtl"?f.right-t.clientX:t.clientX-f.left,E=e.vertical?f.height:f.width,B=v/E;return p+B*(g-p)},[N,e.vertical,y,p,g,k.start,k.end,e.value&&e.value.start,e.value&&e.value.end]),z=a.useCallback(t=>t<=d.start?"start":t>=d.end?"end":2*t<d.end+d.start?"start":"end",[k.start,k.end,e.value&&e.value.start,e.value&&e.value.end]),q=a.useCallback(t=>{switch(t.keyCode){case i.Keys.right:t.preventDefault(),o({type:y==="rtl"?l.RANGE_ACTION.decrease:l.RANGE_ACTION.increase,key:"start",event:t});break;case i.Keys.up:t.preventDefault(),o({type:l.RANGE_ACTION.increase,key:"start",event:t});break;case i.Keys.left:t.preventDefault(),o({type:y==="rtl"?l.RANGE_ACTION.increase:l.RANGE_ACTION.decrease,key:"start",event:t});break;case i.Keys.down:t.preventDefault(),o({type:l.RANGE_ACTION.decrease,key:"start",event:t});break;case i.Keys.home:t.preventDefault(),o({type:l.RANGE_ACTION.min,key:"start",event:t});break;case i.Keys.end:t.preventDefault(),o({type:l.RANGE_ACTION.max,key:"start",event:t});break}},[o]),V=a.useCallback(t=>{switch(t.keyCode){case i.Keys.right:t.preventDefault(),o({type:y==="rtl"?l.RANGE_ACTION.decrease:l.RANGE_ACTION.increase,key:"end",event:t});break;case i.Keys.up:t.preventDefault(),o({type:l.RANGE_ACTION.increase,key:"end",event:t});break;case i.Keys.left:t.preventDefault(),o({type:y==="rtl"?l.RANGE_ACTION.increase:l.RANGE_ACTION.decrease,key:"end",event:t});break;case i.Keys.down:t.preventDefault(),o({type:l.RANGE_ACTION.decrease,key:"end",event:t});break;case i.Keys.home:t.preventDefault(),o({type:l.RANGE_ACTION.min,key:"end",event:t});break;case i.Keys.end:t.preventDefault(),o({type:l.RANGE_ACTION.max,key:"end",event:t});break}},[o,y]),j=a.useCallback(t=>{const f=C(t),v=z(f);O(v),v==="end"?A.current.focus():m.current.focus();const E=v==="end"?l.RANGE_ACTION.end:l.RANGE_ACTION.start;o({type:E,payload:f,event:t})},[e.vertical,p,g,o]),H=t=>{const f=C(t),v=D==="end"?l.RANGE_ACTION.end:l.RANGE_ACTION.start;o({type:v,payload:f,event:t})},L=t=>{const f=C(t),v=D==="end"?l.RANGE_ACTION.end:l.RANGE_ACTION.start;o({type:v,payload:f,event:t}),O("")};return i.useDraggable(N,{onPress:j,onDrag:H,onRelease:L}),a.createElement("div",{id:e.id,style:e.style,ref:c,dir:y,className:i.classNames("k-slider",{"k-rtl":y==="rtl","k-disabled":e.disabled,"k-slider-vertical":e.vertical,"k-slider-horizontal":!e.vertical},e.className)},a.createElement("div",{ref:N,className:"k-slider-track-wrap",style:{flexGrow:1,position:"relative",touchAction:"none",...P}},e.children&&a.createElement("ul",{className:"k-reset k-slider-items",style:{...M}},a.Children.map(e.children,t=>t&&a.cloneElement(t,{position:100*(t.props.position-e.min)/(e.max-e.min),vertical:e.vertical},t.props.children))),a.createElement("div",{ref:K,className:"k-slider-track",style:e.vertical?{bottom:0,height:"100%"}:{[y==="rtl"?"right":"left"]:0,width:"100%"}},b!==null&&h!==null&&a.createElement("div",{"data-selection":!0,ref:u,title:`${d.start} - ${d.end}`,className:"k-slider-selection",style:e.vertical?{height:h-b+"%",bottom:b+"%"}:{[y==="rtl"?"right":"left"]:b+"%",width:h-b+"%"}}),a.createElement("span",{ref:m,role:"slider",tabIndex:i.getTabIndex(e.startTabIndex,e.disabled,void 0),"aria-valuemin":p,"aria-valuemax":Math.max(g,d.end),"aria-valuenow":d.start,"aria-disabled":e.disabled?"true":void 0,"aria-valuetext":`${d.start} - ${d.end}`,className:"k-draghandle",title:w.toLanguageString(R.sliderDragTitle,R.messages[R.sliderDragTitle]),style:e.vertical?{bottom:"calc("+b+"%)",zIndex:1}:y==="rtl"?{right:"calc("+b+"% - 13px)",zIndex:1}:{left:"calc("+b+"%)",zIndex:1},onKeyDown:q}),a.createElement("span",{ref:A,role:"slider",tabIndex:i.getTabIndex(e.endTabIndex,e.disabled,void 0),"aria-valuemin":Math.min(p,d.start),"aria-valuemax":g,"aria-valuenow":d.end,"aria-disabled":e.disabled?"true":void 0,"aria-valuetext":`${d.start} - ${d.end}`,className:"k-draghandle",title:w.toLanguageString(R.sliderDragTitle,R.messages[R.sliderDragTitle]),style:e.vertical?{bottom:"calc("+h+"%)",zIndex:1}:y==="rtl"?{right:"calc("+h+"% - 13px)",zIndex:1}:{left:"calc("+h+"%)",zIndex:1},onKeyDown:V}))))}),Q={value:(r,n,e)=>{if(r.value){const s=r.value.start,c=r.value.end,u=r.min,m=r.max;if(s>c||s>m||s<u||c>m||c<u||c<s)return new Error(`Invalid prop + ${n} supplied to ${e}.
                    The { start, end } value must be between the min & max value and { start, end } must be start < end.
                    `)}return null},defaultValue:(r,n,e)=>{if(r.defaultValue){const s=r.defaultValue.start,c=r.defaultValue.end,u=r.min,m=r.max;if(s>c||s>m||s<u||c>m||c<u||c<s)return new Error(`Invalid prop + ${n} supplied to ${e}.
                    The { start, end } value must be between the min & max value and { start, end } must be start < end.
                    `)}return null},onChange:I.func,step:I.number,min:(r,n,e)=>{const s=r[n],c=r.min,u=r.max;return c===void 0?new Error(`Invalid prop + ${n} supplied to ${e}.
                ${n} value can not be undefined.
                `):s&&c>=u?new Error(`Invalid prop + ${n} supplied to ${e}.
                ${n} value can not be equal to or bigger than the max value.
                `):null},max:(r,n,e)=>{const s=r[n],c=r.min,u=r.max;return u===void 0?new Error(`Invalid prop + ${n} supplied to ${e}.
                ${n} value can not be undefined.
                `):s&&u<=c?new Error(`Invalid prop + ${n} supplied to ${e}.
                ${n} value can not be equal to or smaller than the min value.
                `):null},vertical:I.bool,disabled:I.bool,dir:I.oneOf(["ltr","rtl"])},T={step:1,defaultValue:{start:0,end:0},vertical:!1,disabled:!1};x.displayName="KendoReactRangeSlider";x.propTypes=Q;x.defaultProps=T;exports.RangeSlider=x;exports.RangeSliderPropsContext=_;
