/**
 * @license
 *-------------------------------------------------------------------------------------------
 * Copyright Â© 2024 Progress Software Corporation. All rights reserved.
 * Licensed under commercial license. See LICENSE.md in the package root for more information
 *-------------------------------------------------------------------------------------------
 */
"use client";"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const ke=require("react"),s=require("prop-types"),u=require("@progress/kendo-react-common"),c=require("@progress/kendo-react-data-tools"),Ie=require("./cells/GridSelectionCell.js"),Ee=require("./cells/GridHierarchyCell.js"),xe=require("./cells/GridEditCell.js"),_e=require("./header/Header.js"),ze=require("./header/HeaderRow.js"),De=require("./header/FilterRow.js"),He=require("./header/GroupPanel.js"),Te=require("./footer/Footer.js"),ae=require("@progress/kendo-react-intl"),A=require("./messages/index.js"),Ne=require("./VirtualScroll.js"),O=require("./VirtualScrollFixed.js"),Fe=require("./drag/ColumnResize.js"),Ge=require("./drag/CommonDragLogic.js"),v=require("./utils/index.js"),Le=require("./cells/GridCell.js"),ie=require("./cells/GridGroupCell.js"),Me=require("./rows/GridRow.js"),Ae=require("./header/GridHeaderSelectionCell.js"),Oe=require("./GridNoRecords.js"),oe=require("./filterCommon.js"),Ke=require("./footer/FooterRow.js"),qe=require("./paging/GridPagerSettings.js"),re=require("./package-metadata.js"),Pe=require("./cells/GridDetailCell.js"),Ve=require("./cells/GridDetailHierarchyCell.js");function Ue(D){const a=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(D){for(const h in D)if(h!=="default"){const g=Object.getOwnPropertyDescriptor(D,h);Object.defineProperty(a,h,g.get?g:{enumerable:!0,get:()=>D[h]})}}return a.default=D,Object.freeze(a)}const r=Ue(ke),z=class z extends r.Component{constructor(a){super(a),this._columns=[],this._columnsMap=[[]],this._columnsMutations=0,this._resized=!1,this._shouldUpdateLeftRight=!0,this.contextStateRef={current:void 0},this.navigationStateRef={current:void 0},this._data=[],this._slicedData=void 0,this.wrapperScrollTop=0,this.showLicenseWatermark=!1,this.headerRef=r.createRef(),this.headerElementRef=r.createRef(),this._element=null,this.tableElement=null,this.containerRef=r.createRef(),this.tableBodyRef=r.createRef(),this._footer=null,this.forceUpdateTimeout=void 0,this.isRtl=!1,this.observer=null,this.handleIntersection=e=>{const t={rowIndex:this.rowIndex};e.forEach(o=>{o.isIntersecting||this.setCurrentOnTop(t)})},this.setCurrentOnTop=e=>{if(!this.vs.container||this.props.scrollable==="none")return;this.observer&&this.observer.disconnect();const{rowIndex:t}=e;if(this.props.scrollable==="virtual")this.vs.askedSkip=t,this.vs.container.scroll(0,Math.round(this.vs.askedSkip/this.vs.total*this.vs.container.scrollHeight));else if(this.element){const o=t<1?this.element.querySelector("tbody > tr:nth-child(1)"):this.element.querySelector(`tbody > tr:nth-child(${t+1})`);o&&this.containerRef.current&&(this.containerRef.current.scrollTop=o.offsetTop)}},this.scrollIntoView=e=>{if(!this.vs.container||this.props.scrollable==="none")return;this.rowIndex=e.rowIndex;const{rowIndex:t}=e,o=this.element;if(this.observer&&o){this.observer.disconnect();const n=o.querySelector(`[absolute-row-index="${t}"]`);n?this.observer.observe(n):this.setCurrentOnTop(e)}},this.fitColumns=e=>{this.columnResize.dblClickHandler(null,e)},this.onContextMenu=(e,t,o)=>{if(this.props.onContextMenu){const n={target:this,syntheticEvent:e,nativeEvent:e.nativeEvent,dataItem:t,field:o};this.props.onContextMenu.call(void 0,n)}},this.getVirtualScroll=e=>{const{rowHeight:t,detailRowHeight:o,detail:n,expandField:p,groupable:l}=e,d=this.isAllData(),R=t!==void 0&&t>0,w=o!==void 0&&o>0,x=l===!0||typeof l=="object"&&l.enabled!==!1;return!R||x&&!d||!!(n&&p)&&(!w||!d)?Ne.VirtualScroll:O.VirtualScrollFixed},this.isAllData=()=>{const{data:e,total:t}=this.props;return Array.isArray(e)?e.length===t:e?t===e.total:!1},this.initializeVirtualization=(e,t)=>{if(this.reInitVirtualization(this.props.scrollable==="virtual",this.props.total,this.props.filter,this.props.group,this.props.sort,t||this.props.rowHeight===void 0||this.props.rowHeight===0),this.vs.fixedScroll=this.props.fixedScroll||!1,this.vs.PageChange=this.pageChange,this.vs.realSkip=this.props.skip||0,this.vs.pageSize=(this.props.take!==void 0?this.props.take:this.props.pageSize)||0,this.vs.scrollableVirtual=this.props.scrollable==="virtual",this.vs.total=e,this.vs.propsSkip=(this.props.skip||0)+(this.props.scrollable==="virtual"?this.vs.topCacheCount+(this.vs.attendedSkip-(this.props.skip||0)):0),this.props.rowHeight!==void 0&&this.props.rowHeight>0&&!t){const o=this.props.rowHeight*e;this.vs.containerHeight=v.firefox?Math.min(v.firefoxMaxHeight,o):o}else this.vs.containerHeight=1533915;if(this.vs.containerRef=this.containerRef,this.vs.tableBodyRef=this.tableBodyRef,this.vs.table=this.tableElement,this._slicedData=void 0,this.vs instanceof O.VirtualScrollFixed){const{rowHeight:o=0,detail:n,expandField:p}=this.props;let{detailRowHeight:l=0}=this.props;l=n&&p?l:o,this.isAllData()?(this.vs.total=this._data.length,this._slicedData=this._data.slice(this.vs.realSkip,this.vs.realSkip+this.vs.pageSize),this.vs.rowHeightService=this.rowHeightService(this.vs,this._data.length,o,l,this._data)):this.vs.rowHeightService=new O.RowHeightService(e,o,l);const d=this.vs.rowHeightService.totalHeight();this.vs.containerHeight=v.firefox?Math.min(v.firefoxMaxHeight,d):d}},this.scrollHandler=e=>{if(e.target!==e.currentTarget)return;clearTimeout(this.forceUpdateTimeout),this.vs.table=this.tableElement;const t=e.currentTarget.scrollLeft,o=e.currentTarget.scrollTop;this.props.columnVirtualization&&(!this.vs.scrollableVirtual||o===this.wrapperScrollTop)&&(this.forceUpdateTimeout=window.setTimeout(()=>{this.forceUpdate()},0)),this._header&&this._header.setScrollLeft(t),this._footer&&this._footer.setScrollLeft(t),this.vs&&o!==this.wrapperScrollTop&&this.vs.scrollHandler(e),u.dispatchEvent(this.props.onScroll,e,this,void 0),this.wrapperScrollTop=o},this.onKeyDown=e=>{if(c.tableKeyboardNavigation.onKeyDown(e,{contextStateRef:this.contextStateRef,navigationStateRef:this.navigationStateRef,onNavigationAction:this.onNavigationAction}),this.props.onKeyDown){const{mode:t,cell:o}=c.getSelectionOptions(this.props.selectable),n={dataItems:this.getLeafDataItems(),mode:t,cell:o,componentId:this._gridId,selectedField:this.props.selectedField,...this.getArguments(e)};this.props.onKeyDown.call(void 0,n)}},this.onFocus=e=>{c.tableKeyboardNavigation.onFocus(e,{contextStateRef:this.contextStateRef})},this.onNavigationAction=e=>{if(this.props.onNavigationAction){const t={focusElement:e.focusElement,...this.getArguments(e.event)};this.props.onNavigationAction.call(void 0,t)}},this.rowClick=(e,t)=>{this.props.onRowClick&&e.target.nodeName==="TD"&&this.props.onRowClick.call(void 0,{dataItem:t.dataItem,...this.getArguments(e)})},this.rowDblClick=(e,t)=>{this.props.onRowDoubleClick&&e.target.nodeName==="TD"&&this.props.onRowDoubleClick.call(void 0,{dataItem:t.dataItem,...this.getArguments(e)})},this.itemChange=e=>{const t=this.props.onItemChange;if(e.field===this.props.expandField||this.props.group&&e.field===void 0){const o=this.props.onExpandChange;o&&o.call(void 0,{...this.getArguments(e.syntheticEvent),dataItem:e.dataItem,dataIndex:e.dataIndex,value:e.value});return}t&&t.call(void 0,{...this.getArguments(e.syntheticEvent),dataItem:e.dataItem,field:e.field,value:e.value})},this.onHeaderSelectionChange=e=>{this.props.onHeaderSelectionChange&&this.props.onHeaderSelectionChange.call(void 0,{field:e.field,nativeEvent:e.syntheticEvent&&e.syntheticEvent.nativeEvent,syntheticEvent:e.syntheticEvent,target:this,dataItems:this.getLeafDataItems(),selectedField:this.props.selectedField})},this.selectionRelease=e=>{if(this.props.onSelectionChange){const t={syntheticEvent:void 0,target:this,selectedField:this.props.selectedField||"",componentId:this._gridId,dataItems:this.getLeafDataItems(),dataItem:null,...e};this.props.onSelectionChange.call(void 0,t)}},this.pageChange=(e,t,o)=>{this.raiseDataEvent(this.props.onPageChange,{page:e},{skip:e.skip,take:e.take},t,o)},this.pagerPageChange=e=>{this.pageChange({skip:e.skip,take:e.take},e.syntheticEvent,e.targetEvent)},this.sortChange=(e,t)=>{this.raiseDataEvent(this.props.onSortChange,{sort:e},{sort:e,...this.props.scrollable==="virtual"?{skip:0}:{}},t)},this.filterChange=(e,t)=>{this.raiseDataEvent(this.props.onFilterChange,{filter:e},{filter:e||void 0,skip:0},t)},this.groupChange=(e,t)=>{const o=t.nativeEvent?t:{nativeEvent:t.nativeEvent||t.originalEvent};this.raiseDataEvent(this.props.onGroupChange,{group:e},{group:e,skip:0},o)},this.onClipboard=(e,t)=>{if(this.props.onClipboard){if(!this.inActiveElement()||!e)return;this.props.onClipboard.call(void 0,{type:e,nativeEvent:t,columns:this._columns,dataItemKey:this.props.dataItemKey||"",...typeof this.props.clipboard!="boolean"?this.props.clipboard:{}})}},this.inActiveElement=()=>{var p,l,d;if(!u.canUseDOM)return!1;const e=u.getActiveElement(this.document),t=e?e.matches(".k-table-td")?e:(p=this.document)==null?void 0:p.body:(l=this.document)==null?void 0:l.body,o=t.closest(".k-grid-container"),n=t&&((d=this._element)==null?void 0:d.contains(t));return!!(t&&n&&o)},this.onResize=(e,t,o,n,p,l)=>{this.resetTableWidth(),this._shouldUpdateLeftRight=!0,this._resized=!0,this._columnsMutations++,this.props.onColumnResize&&this.props.onColumnResize.call(void 0,{columns:this.columns,nativeEvent:n,targetColumnId:l,index:e,newWidth:t,oldWidth:o,end:p,target:this})},this.reInitVirtualization=u.memoizeOne((e,t,o,n,p,l)=>{this.vs.reset();const d=this.getVirtualScroll(this.props);this.vs=new d(l)}),this.flatData=u.memoizeOne((e,t,o,n,p,l,d)=>{const R=[],w=v.flatData(R,e,t,{index:o},n!==void 0,p);return{flattedData:R,resolvedGroupsCount:w}}),this.rowHeightService=u.memoizeOne((e,t,o,n,p)=>new O.RowHeightService(t,o,n,p)),this.childrenToArray=u.memoizeOne(e=>r.Children.toArray(e)),this.readColumns=u.memoizeOne((e,t,o)=>{const n=e.filter(p=>p&&p.type&&p.type.displayName==="KendoReactGridColumn");return v.readColumns(n,this.columns,{prevId:0,idPrefix:t})}),this.mapColumns=u.memoizeOne((e,t)=>c.mapColumns(e,t)),this.configureColumns=u.memoizeOne((e,t,o)=>{this.props.selectedField&&e.filter(l=>l.field===this.props.selectedField).forEach(l=>{l.width=l.width||"50px",l.cell=l.cell||Ie.GridSelectionCell,l.headerCell=l.headerCell||Ae.GridHeaderSelectionCell});const n={id:"",resizable:!0,width:"32px",title:" ",declarationIndex:-1,orderIndex:-1,children:[],parentIndex:-1,depth:0,colSpan:0,rowSpan:0,left:0,right:0,index:0,rightBorder:!1,ariaColumnIndex:0,isAccessible:!0};let p=0;this.props.expandField&&this.props.onExpandChange&&this.props.detail&&(e.unshift({...n,cell:Ee.GridHierarchyCell,field:this.props.expandField,headerClassName:"k-hierarchy-cell k-header"}),p++);for(let l=0;l<t;l++)e.unshift({...n,isAccessible:!1,cell:ie.GridGroupCell,field:"value",locked:this.props.lockGroups}),p++;e.slice(p).forEach(l=>l.parentIndex>=0&&(l.parentIndex+=p))}),this.getHeaderRow=u.memoizeOne((e,t,o,n,p,l,d,R,w,x,y,G)=>r.createElement(ze.HeaderRow,{cells:this.props.cells,sort:e,sortable:t,sortChange:this.sortChange,group:o||[],groupable:n,groupChange:this.groupChange,filter:p,filterable:l,filterOperators:d,filterChange:this.filterChange,columnMenu:w,selectionChange:this.onHeaderSelectionChange,columns:x,columnResize:this.columnResize,pressHandler:this.dragLogic.pressHandler,dragHandler:this.dragLogic.dragHandler,releaseHandler:this.dragLogic.releaseHandler,columnsMap:y,cellRender:R,isRtl:G,dragClue:this.dragLogic.dragClueRef,headerRef:this.headerElementRef,containerRef:this.containerRef,navigatable:this.props.navigatable,columnGroupChange:this.columnGroupChange})),this.resolveTitle=e=>{const t=this._columns.find(n=>n.field===e),o=t&&(t.title||t.field);return o===void 0?e:o},this.getLeafDataItems=()=>this._data.filter(e=>e.rowType==="data").map(e=>e.dataItem),u.validatePackage(re.packageMetadata),this.showLicenseWatermark=u.shouldShowValidationUI(re.packageMetadata);const h=this.props.groupable===!0||typeof this.props.groupable=="object"&&this.props.groupable.enabled!==!1,g=this.getVirtualScroll(a);this.vs=new g(h||a.rowHeight===void 0||a.rowHeight===0),this.dragLogic=new Ge.CommonDragLogic(this.columnReorder.bind(this),this.groupReorder.bind(this),this.columnToGroup.bind(this)),this.columnGroupChange=this.columnGroupChange.bind(this),this.columnResize=new Fe.ColumnResize(this.onResize),this.props.clipboard&&(this.clipboardService=new c.ClipboardService(this.onClipboard)),c.tableKeyboardNavigation.onConstructor({navigatable:!!a.navigatable,contextStateRef:this.contextStateRef,navigationStateRef:this.navigationStateRef,idPrefix:this._gridId})}get columns(){const a=this._columns.filter(h=>h.declarationIndex>=0&&h.parentIndex===-1);return v.sanitizeColumns(a)}get element(){return this._element}get document(){if(u.canUseDOM)return this.element&&this.element.ownerDocument||document}get _header(){return this.headerRef.current}get _gridId(){return this.props.id+"-role-element-id"}componentDidMount(){this.resetTableWidth(),u.setScrollbarWidth();const a=c.isRtl(this.element);this.isRtl=a,c.tableKeyboardNavigation.onComponentDidMount({scope:this.element||void 0,contextStateRef:this.contextStateRef,navigationStateRef:this.navigationStateRef}),this.isRtl&&this.forceUpdate();const h={rootMargin:"0px",threshold:.9};this.clipboardService&&this.clipboardService.addEventListeners(this.document),this.observer=u.canUseDOM&&window.IntersectionObserver&&new window.IntersectionObserver(this.handleIntersection,h)||null}getSnapshotBeforeUpdate(){return c.tableKeyboardNavigation.onGetSnapshotBeforeUpdate({document:this.document,contextStateRef:this.contextStateRef,navigationStateRef:this.navigationStateRef}),null}componentDidUpdate(){this.resetTableWidth(),u.setScrollbarWidth(),this.vs.tableTransform&&this.vs.table&&(this.vs.table.style.transform=this.vs.tableTransform,this.vs.tableTransform=""),c.tableKeyboardNavigation.onComponentDidUpdate({scope:this.element||void 0,contextStateRef:this.contextStateRef,navigationStateRef:this.navigationStateRef})}componentWillUnmount(){clearTimeout(this.forceUpdateTimeout),this.clipboardService&&this.clipboardService.removeEventListeners(this.document)}render(){var te;let a=this.props.total||0;const h=c.tableKeyboardNavigationTools.getIdPrefix(this.navigationStateRef),g=ae.provideLocalizationService(this);let e=[];Array.isArray(this.props.data)?(e=this.props.data,a=a||this.props.data.length):this.props.data&&(e=this.props.data.data,a=a||this.props.data.total);const t=typeof this.props.groupable=="object"&&this.props.groupable.footer||"none",{resolvedGroupsCount:o,flattedData:n}=this.flatData(e,t,this.props.skip||0,this.props.group,this.props.expandField,this.props.filter,this.props.sort);this._data=n;const p=this.props.groupable===!0||typeof this.props.groupable=="object"&&this.props.groupable.enabled!==!1;this.columnResize.resizable=this.props.resizable||!1,this.dragLogic.reorderable=this.props.reorderable||!1,this.dragLogic.groupable=p;const l=this.props.selectable&&this.props.selectable.drag?"none":void 0;this.initializeVirtualization(a,p);const d=this.childrenToArray(this.props.children);this.initColumns(d,o);const R=d.map(i=>i&&i.type&&i.type.displayName==="KendoReactGridToolbar"?r.cloneElement(i,{...i.props,ariaControls:this._gridId}):null),w=d.filter(i=>i&&i.type&&i.type.displayName==="KendoReactGridNoRecords"),x=d.filter(i=>i&&i.type&&i.type.displayName==="KendoReactGridStatusBar"),y=this._columns.filter(i=>i.children.length===0),G=p&&r.createElement(He.GroupPanel,{group:this.props.group||[],groupChange:this.groupChange,pressHandler:this.dragLogic.pressHandler,dragHandler:this.dragLogic.dragHandler,releaseHandler:this.dragLogic.releaseHandler,refCallback:this.dragLogic.refGroupPanelDiv,resolveTitle:this.resolveTitle,ariaControls:this._gridId,onContextMenu:this.onContextMenu}),{sort:le,sortable:ne,group:he,filter:pe,filterable:ce,filterOperators:de=oe.operators,headerCellRender:ue,columnMenu:ge}=this.props,U=r.createElement(_e.Header,{size:this.props.size,columnResize:this.columnResize,staticHeaders:this.props.scrollable!=="none",scrollableDataElement:()=>this.vs.container,draggable:this.props.reorderable||p,ref:this.headerRef,elemRef:this.headerElementRef,headerRow:this.getHeaderRow(le,ne,he,p,pe,ce,de,ue,ge,this._columns,this._columnsMap,this.isRtl),filterRow:this.props.filterable&&r.createElement(De.FilterRow,{cells:this.props.cells,size:this.props.size,columns:this._columns,filter:this.props.filter,filterOperators:this.props.filterOperators||oe.operators,filterChange:this.filterChange,sort:this.props.sort,cellRender:this.props.filterCellRender,isRtl:this.isRtl,ariaRowIndex:this._columnsMap.length+1})||void 0,cols:y.map((i,m)=>r.createElement("col",{key:m.toString(),width:v.getColumnWidth(i)}))}),fe=this.vs&&this.vs.container&&this.vs.container.scrollLeft||0,me=parseFloat(((this.props.style||{}).width||"").toString()),{colSpans:be,hiddenColumns:ve}=c.tableColumnsVirtualization({enabled:this.props.columnVirtualization,columns:y,tableViewPortWidth:me,scrollLeft:fe}),Ce=(i,m,b)=>{let _=!1;const E=this.props.selectedField?v.getNestedValue(this.props.selectedField,i.dataItem):void 0;return{row:y.map((f,C)=>{if(ve[C])return null;const T=f.id?f.id:C,N=`${f.className?f.className+" ":""}${f.locked?"k-grid-content-sticky":""}`,k=f.left!==void 0?this.isRtl?{left:f.right,right:f.left}:{left:f.left,right:f.right}:{};let I=!1;if(f.editable&&this.props.editField){const S=v.getNestedValue(this.props.editField,i.dataItem);S&&(S===!0||S===f.field)&&(_=!0,I=!0)}const V=f.cell||I&&xe.GridEditCell||Le.GridCell,F=this.props.expandField&&this.props.detail&&f.field===this.props.expandField;return r.createElement(V,{onContextMenu:this.onContextMenu,key:T,locked:this.props.lockGroups,id:c.tableKeyboardNavigationTools.generateNavigatableId(`${m}-${String(C)}`,h,F?"nodata":"cell"),colSpan:be[C],dataItem:i.dataItem,field:f.field,editor:f.editor,format:f.format,className:N,render:this.props.cellRender,cells:v.resolveCells(this.props.cells,f.cells),onChange:this.itemChange,selectionChange:this.props.onSelectionChange?S=>{this.selectionChange({event:S,dataItem:i.dataItem,dataIndex:b,columnIndex:C})}:void 0,columnIndex:C,columnsCount:y.length,rowType:i.rowType,level:i.level,expanded:i.expanded,dataIndex:i.dataIndex,style:k,ariaColumnIndex:f.ariaColumnIndex,isSelected:Array.isArray(E)&&E.indexOf(C)>-1})}),isInEdit:_,isSelected:typeof E=="boolean"&&E}};let W=0;if(this.props.scrollable==="virtual")for(let i=0;i<this.vs.topCacheCount+this.vs.attendedSkip-(this.props.skip||0);i++){const m=this._data.shift();if(m)this._data.push(m),W++,m.rowType==="groupHeader"&&i--;else break}const B=i=>i>=this._data.length-W;let $=this.vs.realSkip||0;const L=[];let q=!1;const P=this._columnsMap.length+(this.props.filterable?1:0)+1;let H=0;if(this._data.length){let i=-1,m=0;(this._slicedData||this._data).forEach((b,_)=>{b.rowType==="data"&&($++,i++);const E=$%2===0,f=this.props.dataItemKey&&u.getter(this.props.dataItemKey)(b.dataItem),C=_+(this.vs.realSkip||0),T=f||"ai"+C,N=T+"_1",k=Ce(b,T,i);if(H=C+P+m,L.push(r.createElement(Me.GridRow,{key:T,dataItem:b.dataItem,isAltRow:E,isInEdit:k.isInEdit,rowType:b.rowType,isHidden:B(_),onClick:I=>this.rowClick(I,b),onDoubleClick:I=>this.rowDblClick(I,b),selectedField:this.props.selectedField,rowHeight:this.props.rowHeight,render:this.props.rowRender,ariaRowIndex:H,absoluteRowIndex:C,dataIndex:this.vs.scrollableVirtual?C:i,isSelected:k.isSelected},k.row)),this.props.detail&&b.rowType==="data"&&b.expanded){const I=y.length-(this.props.expandField?1:0)-(this.props.group?this.props.group.length:0)||1;m++,H=C+P+m,L.push(r.createElement("tr",{key:N,className:u.classNames("k-table-row",E?"k-detail-row k-table-alt-row k-alt":"k-detail-row"),style:{visibility:B(_)?"hidden":"",height:this.props.detailRowHeight},role:"row","aria-rowindex":H},this.props.group&&this.props.group.map((V,F)=>{var se;const S=(se=k==null?void 0:k.row[F])==null?void 0:se.props.style,we=S?this.isRtl?{left:S.right,right:S.left}:{left:S.left,right:S.right}:{};return r.createElement(ie.GridGroupCell,{id:"",dataIndex:b.dataIndex,field:V.field,dataItem:b.dataItem,key:F,style:we,ariaColumnIndex:1+F,isSelected:!1,locked:this.props.lockGroups,isRtl:this.isRtl,cells:this.props.cells})}),this.props.expandField&&r.createElement(Ve.GridDetailHierarchyCell,{id:c.tableKeyboardNavigationTools.generateNavigatableId(`${N}-dhcell`,h)}),r.createElement(Pe.GridDetailCell,{onContextMenu:this.onContextMenu,dataItem:b.dataItem,dataIndex:b.dataIndex,colSpan:I,ariaColIndex:2+(this.props.group?this.props.group.length:0),detail:this.props.detail,id:c.tableKeyboardNavigationTools.generateNavigatableId(`${N}-dcell`,h)})))}})}else q=!0;const Re=()=>{const i=this._header;return i&&i.table.clientWidth},j=()=>r.createElement("div",{key:"no-records",className:"k-grid-norecords","aria-rowindex":P,style:{width:Re()}},r.createElement("div",{className:"k-grid-norecords-template"},w.length?w:r.createElement(Oe.GridNoRecords,null))),J={size:this.props.size,onPageChange:this.pagerPageChange,total:a,dir:this.isRtl?"rtl":void 0,skip:this.vs.propsSkip||0,take:(this.props.take!==void 0?this.props.take:this.props.pageSize)||10,messagesMap:A.pagerMessagesMap,...qe.normalize(this.props.pageable||{})},Q=this.props.pager?r.createElement(this.props.pager,{...J}):r.createElement(c.Pager,{className:"k-grid-pager",...J}),ye=i=>this.props.sort&&this.props.sort.filter(m=>m.field===i).length>0,Se=(i,m)=>r.createElement("col",{key:m.toString(),width:v.getColumnWidth(i)}),X=(te=this.props.cells)!=null&&te.footerCell||this._columns.some(i=>{var m;return!!(i.footerCell||(m=i.cells)!=null&&m.footerCell)})?r.createElement(Te.Footer,{size:this.props.size,columnResize:this.columnResize,staticHeaders:this.props.scrollable!=="none",ref:i=>this._footer=i,row:r.createElement(Ke.FooterRow,{cells:this.props.cells,columns:this._columns,isRtl:this.isRtl,ariaRowIndex:H+1}),cols:y.map(Se)}):null,Y=r.createElement("colgroup",{ref:i=>{this.columnResize.colGroupMain=i}},y.map((i,m)=>r.createElement("col",{key:m.toString(),className:ye(i.field)?"k-sorted":void 0,width:v.getColumnWidth(i)}))),Z=this.dragLogic.reorderable||this.dragLogic.groupable,ee=this.props.columnVirtualization?"block":"table";if(this.props.scrollable==="none")return r.createElement(c.TableKeyboardNavigationContext.Provider,{value:this.contextStateRef.current},r.createElement("div",{id:this.props.id,style:this.props.style,className:u.classNames("k-grid",{"k-grid-md":!this.props.size,[`k-grid-${u.kendoThemeMaps.sizeMap[this.props.size]||this.props.size}`]:this.props.size},this.props.className),ref:i=>{this._element=i},"aria-label":this.props.ariaLabel,onKeyDown:this.onKeyDown,onFocus:this.onFocus,...c.tableKeyboardNavigationScopeAttributes},R,G,r.createElement(c.TableSelection,{selectable:this.props.selectable,onRelease:this.selectionRelease,childRef:i=>{this.tableElement=i}},r.createElement("table",{className:u.classNames("k-table k-grid-table",{[`k-table-${u.kendoThemeMaps.sizeMap[this.props.size]||this.props.size}`]:this.props.size}),style:{userSelect:l,display:ee}},Y,U,r.createElement("tbody",{role:"rowgroup",className:"k-table-tbody",...c.tableKeyboardNavigationBodyAttributes},L),X)),q&&j(),Z&&r.createElement(r.Fragment,null,r.createElement(c.DropClue,{ref:this.dragLogic.refDropElementClue}),r.createElement(c.DragClue,{ref:this.dragLogic.refDragElementClue}))),x,this.props.pageable&&Q);let M=this.props.style||{};return this.props.scrollable==="virtual"&&(M.height||(M=Object.assign({},M,{height:"450px"}))),r.createElement(c.TableKeyboardNavigationContext.Provider,{value:this.contextStateRef.current},r.createElement("div",{id:this.props.id,style:M,className:u.classNames("k-grid",{"k-grid-md":!this.props.size,[`k-grid-${u.kendoThemeMaps.sizeMap[this.props.size]||this.props.size}`]:this.props.size,"k-grid-virtual":this.props.scrollable==="virtual"},this.props.className),ref:i=>{this._element=i},"aria-label":this.props.ariaLabel,onKeyDown:this.onKeyDown,onFocus:this.onFocus,...c.tableKeyboardNavigationScopeAttributes},R,G,r.createElement("div",{className:"k-grid-aria-root",role:"grid","aria-colcount":y.length,"aria-rowcount":a,id:this._gridId,"aria-label":g.toLanguageString(A.gridAriaLabel,A.messages[A.gridAriaLabel])},U,r.createElement("div",{className:"k-grid-container",role:"presentation"},r.createElement("div",{ref:this.containerRef,className:"k-grid-content k-virtual-content",onScroll:this.scrollHandler,role:"presentation"},r.createElement("div",{className:"k-grid-table-wrap",role:"presentation"},r.createElement(c.TableSelection,{selectable:this.props.selectable,onRelease:this.selectionRelease,childRef:i=>{this.tableElement=i}},r.createElement("table",{className:u.classNames("k-table k-grid-table",{"k-table-md":!this.props.size,[`k-table-${u.kendoThemeMaps.sizeMap[this.props.size]||this.props.size}`]:this.props.size}),role:"presentation",style:{userSelect:l,display:ee}},Y,r.createElement("tbody",{className:"k-table-tbody",ref:this.tableBodyRef,role:"rowgroup",...c.tableKeyboardNavigationBodyAttributes},L))),q&&j()),r.createElement("div",{className:"k-height-container",role:"presentation"},r.createElement("div",{style:this.props.scrollable==="virtual"?{height:this.vs.containerHeight+"px"}:{}})))),X,Z&&r.createElement(r.Fragment,null,r.createElement(c.DropClue,{ref:this.dragLogic.refDropElementClue}),r.createElement(c.DragClue,{ref:this.dragLogic.refDragElementClue})),this.showLicenseWatermark&&r.createElement(u.WatermarkOverlay,null)),x,this.props.pageable&&Q))}selectionChange(a){if(this.props.onSelectionChange){const{event:h,dataItem:g,dataIndex:e,columnIndex:t}=a,{mode:o,cell:n}=c.getSelectionOptions(this.props.selectable),p={...this.getArguments(h.syntheticEvent),dataItem:g,startColIndex:t,endColIndex:t,startRowIndex:e,endRowIndex:e,dataItems:this.getLeafDataItems(),altKey:!1,ctrlKey:!1,shiftKey:!1,metaKey:!1,mode:o,cell:n,isDrag:!1,componentId:this._gridId,selectedField:this.props.selectedField||""};this.props.onSelectionChange.call(void 0,p)}}raiseDataEvent(a,h,g,e,t){const o=this.props.onDataStateChange;if(a){const n={...this.getArguments(e),...h,targetEvent:t};a.call(void 0,n)}else o&&o.call(void 0,{...this.getArguments(e),targetEvent:t||{},dataState:{...this.getDataState(),...g}})}columnReorder(a,h,g){const e=this._columns[a],t=e.depth,o=d=>{do d++;while(d<this._columns.length&&this._columns[d].depth>t);return d},n=this._columns.splice(a,o(a)-a);this._columns.splice(a<h?o(h-n.length):h,0,...n),this._columns.filter(d=>d.declarationIndex>=0).forEach((d,R)=>d.orderIndex=R),this._columnsMutations++;const p=this._columns[a].locked&&this._columns[h].locked;c.updateLeft(this._columnsMap,this._columns,p||this._shouldUpdateLeftRight),c.updateRight(this._columnsMap,this._columns,p||this._shouldUpdateLeftRight),this._resized&&(this._shouldUpdateLeftRight=!1,this._resized=!1);const l=this.columns;if(this.forceUpdate(),this.props.onColumnReorder){const d={target:this,columns:l,columnId:e.id,nativeEvent:g};this.props.onColumnReorder.call(void 0,d)}}groupReorder(a,h,g){if(this.props.group===void 0)return;const e=this.props.group.slice();e.splice(h,0,...e.splice(a,1)),this.groupChange(e,g)}columnToGroup(a,h,g){const e=this._columns[a].field;if(!e)return;const t=(this.props.group||[]).slice();t.splice(h,0,{field:e}),this.groupChange(t,g)}columnGroupChange(a,h){const g=this.dragLogic.getCurrentGroupsLength;this.columnToGroup(a,g,h)}resetTableWidth(){let a=0;if(!this.columnResize.colGroupMain)return;const h=this.columnResize.colGroupMain.children;for(let g=0;g<h.length;g++){const e=h[g].width;if(!e)return;a+=parseFloat(e.toString())}a=Math.round(a),this._header&&this._header.setWidth(a),this._footer&&this._footer.setWidth(a),this.tableElement&&(this.tableElement.style.width=a+"px")}initColumns(a,h){const g=c.tableKeyboardNavigationTools.getIdPrefix(this.navigationStateRef),e=this.readColumns(a,g,this._columnsMutations),t=e.length!==this._columns.length;this._columns=e,this._columns.length===0&&(this._columns=v.autoGenerateColumns(this.props.data,this.props.group,this.props.expandField,{prevId:0,idPrefix:g})),this.configureColumns(this._columns,h,g),this._columnsMap=this.mapColumns(this._columns,t),this.columnResize.columns=this._columns,this.dragLogic.columns=this._columns}getDataState(){return{filter:this.props.filter,sort:this.props.sort,skip:this.props.skip,take:this.props.take!==void 0?this.props.take:this.props.pageSize,group:this.props.group}}getArguments(a){return{nativeEvent:a&&a.nativeEvent,syntheticEvent:a,target:this}}};z.displayName="KendoReactGrid",z.defaultProps={},z.propTypes={data:s.oneOfType([s.array,s.shape({data:s.array,total:s.number})]),sortable:s.oneOfType([s.bool,s.shape({mode:s.oneOf(["single","multiple"]),allowUnsort:s.bool})]),onSortChange:s.func,sort:s.array,filterable:s.bool,filter:s.any,onFilterChange:s.func,pageable:s.oneOfType([s.bool,s.shape({buttonCount:s.number,responsive:s.bool,info:s.bool,type:s.oneOf(["numeric","input"]),pageSizes:s.oneOfType([s.bool,s.arrayOf(s.oneOfType([s.string,s.number]))]),previousNext:s.bool})]),pageSize:s.number,onPageChange:s.func,total:s.number,skip:s.number,take:s.number,fixedScroll:s.bool,onExpandChange:s.func,expandField:s.string,selectedField:s.string,onSelectionChange:s.func,onHeaderSelectionChange:s.func,resizable:s.bool,reorderable:s.bool,group:s.any,groupable:s.oneOfType([s.bool,s.shape({enabled:s.bool,footer:s.oneOf(["always","visible","none"])})]),onGroupChange:s.func,onRowClick:s.func,onRowDoubleClick:s.func,onItemChange:s.func,editField:s.string,scrollable:s.oneOf(["none","scrollable","virtual"]),rowHeight:s.number,detailRowHeight:s.number,detail:s.any,style:s.object,onDataStateChange:s.func,onColumnResize:s.func,onColumnReorder:s.func,dataItemKey:s.string,navigatable:s.bool,size:s.oneOf(["small","medium"])},z.contextType=c.TableKeyboardNavigationContext;let K=z;ae.registerForLocalization(K);exports.Grid=K;
